<!DOCTYPE html>
<html>

<head>
    <title>商城範例 (2)</title>
    <link href="_assets/css/main.css" rel="stylesheet">
    <link href="_assets/css/cart.css" rel="stylesheet">
</head>

<body>
    <main>
        <section id="example-info" class="center">
            <h1 id="example-title" class="section-title">商城範例 (2)</h1>
            <p id="example-filename">ch04_ex08_cart-2.html</p>
        </section>
        <div id="product-container">
            <div class="product" id="product-1">
                <div class="product-thumbnail-wrapper"><img class="product-thumbnail"
                        src="_assets/images/harryPotter-1.webp"></div>
                <div class="product-name">哈利波特: 神秘的魔法石</div>
                <div class="product-price-wrapper"><span class="product-price">250</span> 元</div>
                <button class="add-to-cart-button">加入購物車</button>
            </div>
            <div class="product" id="product-2">
                <div class="product-thumbnail-wrapper"><img class="product-thumbnail"
                        src="_assets/images/harryPotter-2.webp"></div>
                <div class="product-name">哈利波特: 消失的密室</div>
                <div class="product-price-wrapper"><span class="product-price">280</span> 元</div>
                <button class="add-to-cart-button">加入購物車</button>
            </div>
            <div class="product" id="product-3">
                <div class="product-thumbnail-wrapper"><img class="product-thumbnail"
                        src="_assets/images/harryPotter-3.webp"></div>
                <div class="product-name">哈利波特: 阿茲卡班的逃犯</div>
                <div class="product-price-wrapper"><span class="product-price">299</span> 元</div>
                <button class="add-to-cart-button">加入購物車</button>
            </div>
            <button class="print-submit-button">結帳</button>
        </div>
    </main>
    <script>
        /*
            商城範例
        */
        let products = [
            {
                'id': 1,
                'title': '哈利波特: 神秘的魔法石',
                'price': 250
            },
            {
                'id': 2,
                'title': '哈利波特: 消失的密室',
                'price': 280
            },
            {
                'id': 3,
                'title': '哈利波特: 阿茲卡班的逃犯',
                'price': 299
            }
        ];

        let cart = {
            'allProducts': products,
            'addedProducts': [],
            'productsAmount': 0,
            'subtotal': 0,
            'addToCartButtons': document.getElementsByClassName('add-to-cart-button'),
            'addToCart': function (productName) {
                console.log("cart.addToCart()");

            },
            'updateSubtotal': function (price) {
                console.log("cart.updateSubtotal()");
                // 回傳 this.subtotal 加上 price
            },
            'updateProductsAmount': function (amount = 1) {
                console.log("cart.updateProductsAmount()");
                // 回傳 this.productsAmount 加上 amount
            },
            'submit': function () {
                console.log("cart.submit()");
                // 送出購物車的資料, 結帳...
            }
        }
        // i去掉let之後如果再呼叫eventlistener的function的話統一會log第四個按鈕，但如果有let就會log第0,1,2...個按鈕
        for (let i = 0; i < cart.addToCartButtons.length; i++) {
            // console.log(cart.addToCartButtons[i]);
            cart.addToCartButtons[i].addEventListener('click', function () {
                console.log('第' + (i + 1) + '個按鈕被按下去了');
            });
        }

    </script>
</body>

</html>